---
title: "Generate a synthetic Time Series with make_AR()"
author: "Alexander Klaus"
output: pdf_document
vignette: >
  %\VignetteIndexEntry{make_MA}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

The `make_AR()` function generates a synthetic time series following an AR(p) (AutoRegressive of order p) model. This function allows you to create time series data based on specified AR coefficients and white noise variance.

### Example 1: Basic Usage of the Function

First, specify how long the time series should be:

```{r}
#library(zeitreihen)

t <- 100
```

Next, determine the coefficients of the AR(p) process, where `p` coefficients must be passed:

```{r}
phi <- 0.5
```

Now, generate the synthetic time series that follows the AR(p) model with the coefficients defined above:

```{r}
zeitreihen::make_AR(t, phi)
```

The output is a numeric or complex atomic vector of length `t` containing data generated by the AR model with hand over parameter. The output values corresponds to the sequential observations from 1 to `t`.

What is happening inside the function:

* It is checked within the function whether the inputs are in the correct format.
* An atomic vector $X$ of length `t` is created. If a vector `start` is passed, `X` contains this vector as values of the first `length(start)` entries.
* `t` normally distributed values with mean 0 and standard deviation `sigma` are generated.
* Iterative calculation of $X$ from `p + 1` to `t` with loop variable i:
    * Consider the vector, which stores the values from $X_{i - 1}$ ... $X_{i - q}$.
    * The dot product of the vector mentioned above and the vector phi is then calculated.
    * $Z[i]$ is added to the dot product.
    * And the previous calculation is stored in X[i].
* Finally, the values are returned.

### Example 2: Medium Example

```{r}
t <- 10
phi <- complex(real = 1, imaginary = 2)
sigma <- 1

zeitreihen::make_AR(t, phi, sigma)
```

Hint: `make_AR` supports numeric or complex atomic vectors for `phi`.

### Example 3: Big Example

```{r}
t <- 40
phi <- 3
sigma <- 1

zeitreihen::make_AR(t, phi, sigma)
```

Calling the `make_AR`, where `sigma` is omitted is allowed. Within `make_AR` we use `1` as default value for `sigma`. Hint: The Output will get big so mind to generate only the number of observation that are needed.

### Example 4: Incorrect Inputs

If the input do not correspond to the correct format, appropriate error messages are printed to inform the user what is wrong with their input. Here are several examples of how incorrect inputs are handled.

The values of phi must be passed in an atomic vector:

```{r, error = TRUE}
t <- 10
phi <- list(1, 2, 3, 4, 5)
sigma <- 1

zeitreihen::make_AR(t, phi, sigma)
```

The values of this atomic vector must be numeric or complex:

```{r, error = TRUE}
t <- 10
phi <- "L"
sigma <- 1

zeitreihen::make_AR(t, phi, sigma)
```

The integer `t` must be greater than the length of phi:

```{r, error = TRUE}
t <- 2
theta <- c(1, 2)
sigma <- 1

zeitreihen::make_MA(t, theta, sigma)
```

Sigma must be a positive numeric value:

```{r, error = TRUE}
t <- 10
phi <- 1
sigma <- 0

zeitreihen::make_AR(t, phi, sigma)
```
