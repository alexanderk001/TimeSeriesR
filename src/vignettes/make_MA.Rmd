---
title: "MA(q)"
author: "Sebastian Meier"
output: pdf_document
vignette: >
  %\VignetteIndexEntry{make_MA}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Moving Average (MA)

The function `make_MA` generates synthetic time series based on MA(q) (Moving Average of order q) model. By Providing the MA coefficients and white noise variance to the `make_MA` function, data for a time series can be created.

### Example 1: First example

First, specify the length of the time series `t`. Next, specify `theta`, which contains the MA coefficients, where `t` must be bigger than sum of all $theta_i$ in `theta`. At last, specify white noise variance as `sigma`, where `sigma` must be bigger than 0.

```{r}
t <- 10
theta <- 1
sigma <- 1

zeitreihen::make_MA(t, theta, sigma)
```

The output is a numeric/complex vector of length `t`, which contains data generated by MA model with hand over parameter. The output values corresponds to the sequential observations from 1 to `t`.

What happens:

* Within the function, It is checked if `t`, `theta` and `sigma` have the required format.
* `q` is derived by the length of `theta`.
* Allocation of a numeric vector of length `t`to store the time series data
* By providing `sigma`, we allocate t+q instances of White noise in `Z`.
* Computation of $X_i$ iterativly by using the definition of $X_i$ = $Z_t$ + $Z_{t-1}\theta_{1}$ + ... + $Z_{t-q}\theta_{q}$.
* At last, The values are returned.

Required Format:

* `t` must be an positive integer of length equal to 1, where NA, Inf or NaN aren't allowed.
* `theta` must be non-empty numeric/complex vector, where `t` has to be bigger than the length of `theta` and `theta` is not allowed to contain NA, INF or NaN values.
* `sigma` must be is a non-zero and positive numeric vector of length equal to 1, where NA, Inf or NaN are not allowed.

### Example 2: medium example

```{r}
t <- 10
theta <- complex(real = 1, imaginary = 2)
sigma <- 1

zeitreihen::make_MA(t, theta, sigma)
```

Hint: `make_MA` supports numeric/complex vector for `theta`.

### Example 3: big example

```{r}
t <- 40
theta <- 3
sigma <- 1

zeitreihen::make_MA(t, theta, sigma)
```

Calling the `make_MA`, where `sigma` is omitted is allowed. Within `make_MA` we use the `1` as a value for `sigma`. Hint: The Output will get big so mind to generate only the number of observation that are needed.

### Example 4: Incorrect Inputs

```{r, error = TRUE}
t <- 10
theta <- 1
sigma <- 0

zeitreihen::make_MA(t, theta, sigma)
```

```{r, error = TRUE}
t <- 10
theta <- "L"
sigma <- 1

zeitreihen::make_MA(t, theta, sigma)
```

```{r, error = TRUE}
t <- 2
theta <- c(1, 2)
sigma <- 1

zeitreihen::make_MA(t, theta, sigma)
```

```{r, error = TRUE}
t <- 2
theta <- NULL
sigma <- 1

zeitreihen::make_MA(t, theta, sigma)
```
